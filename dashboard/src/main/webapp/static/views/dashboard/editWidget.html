<style>
    .as-sortable-item, .as-sortable-placeholder {
        display: table-cell !important;
    }
    *.unselectable {
        -moz-user-select: -moz-none;
        -khtml-user-select: none;
        -webkit-user-select: none;

        /*
          Introduced in IE 10.
          See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/
        */
        -ms-user-select: none;
        user-select: none;
    }
    .close {
        float: right;
        font-size: 21px;
        font-weight: bold;
        line-height: 1;
        color: #000;
        text-shadow: 0 1px 0 #fff;
        filter: alpha(opacity=20);
        opacity: .2;
        margin-top: 0px;
        margin-right: 0px;
    }
    .button {
        position: relative;
        left: 0;
        text-align: right;
        opacity: 0;
        transition: opacity .35s ease;
        z-index: 999;
    }
    .preview-table-settings:hover .button{
        opacity: 1;
    }
    .ns-popover-tooltip > li {
        /*        display:block;*/
        padding: 3px 20px;
        clear: both;
        font-weight: normal;
        /*line-height: 1.42857143;*/
        color: #333;
        white-space: nowrap;

    }

    .col-md-2{
        margin-top: 20px !important;
    }
    .checkbox{
        margin-top: 30px !important;
    }
    .controls {
        padding-bottom: 10px;
    }

    /*a {
      cursor: pointer;
      padding: 6px 12px;
      text-decoration: underline;
      color: #0096d6;
    }*/

    .ns-popover-tooltip a {
        text-decoration: none;
    }

    .switch_wrap input[type="checkbox"] {
        display: none;
    }

    .switch_wrap input[type="checkbox"]:checked + .switch {
        background-color: #6cbc43;
    }

    .switch_wrap input[type="checkbox"]:checked + .switch::before {
        display: block;
    }

    .switch_wrap input[type="checkbox"]:checked + .switch::after {
        display: none;
    }

    .switch_wrap input[type="checkbox"]:checked + .switch .bullet {
        left: 33px;
    }

    .switch_wrap .switch {
        position: relative;
        display: inline-block;
        width: 65px;
        height: 24px;
        line-height: 24px;
        margin-right: 1em;
        margin-top: -3px;
        vertical-align: middle;
        background-color: #c1272d;
        border-radius: 3px;
        border: 1px solid rgba(0, 0, 0, 0.2);
        -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, 0.25) inset, 0 1px 0 rgb(255,255,255);
        box-shadow: 0 0 3px rgba(0, 0, 0, 0.25) inset, 0 1px 0 rgb(255,255,255);
    }

    .switch_wrap .switch::before,
    .switch_wrap .switch::after {
        content: 'ON';
        display: none;
        width: 50%;
        position: absolute;
        top: 0;
        font-size: 11px;
        font-weight: bold;
        color: white;
        text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
        text-align: center;
    }

    .switch_wrap .switch::after {
        content: 'OFF';
        display: block;
        right: 0;
    }

    .switch_wrap .switch .bullet {
        position: relative;
        display: block;
        width: 32px;
        height: 26px;
        top: -2px;
        left: -2px;
        background-color: #f0f0f0;
        background-image: -webkit-gradient(linear, left top, left bottom, from(#f0f0f0), to(#e6e6e6));
        background-image: -webkit-linear-gradient(top, #f0f0f0, #e6e6e6);
        background-image: -moz-linear-gradient(top, #f0f0f0, #e6e6e6);
        background-image: -ms-linear-gradient(top, #f0f0f0, #e6e6e6);
        background-image: -o-linear-gradient(top, #f0f0f0, #e6e6e6);
        background-image: linear-gradient(top, #f0f0f0, #e6e6e6);
        border: 1px solid rgba(0, 0, 0, 0.3);
        border-radius: 3px;
        -webkit-box-shadow: 0 1px 0 white inset, 0 1px 1px rgba(0, 0, 0, 0.25);
        box-shadow: 0 1px 0 white inset, 0 1px 1px rgba(0, 0, 0, 0.25);
        -webkit-transition: left 0.1s linear;
        -moz-transition: left 0.1s linear;
        -ms-transition: left 0.1s linear;
        -o-transition: left 0.1s linear;
        transition: left 0.1s linear;
    }

    .switch_wrap .switch .bullet::before,
    .switch_wrap .switch .bullet::after {
        content: '';
        display: block;
        height: 15px;
        width: 3px;
        position: absolute;
        top: 5px;
        left: 50%;
        margin-left: -6px;
        border: 1px solid #cccccc;
        border-width: 0 1px;
        -webkit-box-shadow: 1px 0 0 white, 1px 0 0 white inset;
        box-shadow: 1px 0 0 white, 1px 0 0 white inset;
    }

    .switch_wrap .switch .bullet::after {
        margin-left: 2px;
    }
    .scheduler-checkBox-label{
        display: block;
        padding-left: 15px;
        text-indent: -15px;
        cursor: pointer;
    }
    .scheduler-checkBox{
        width: 13px;
        height: 13px;
        padding: 0;
        margin:0;
        vertical-align: bottom;
        position: relative;
        top: -1px;
        *overflow: hidden;
    }
    .close {
        float: right;
        font-size: 21px;
        font-weight: bold;
        line-height: 1;
        color: #000;
        text-shadow: 0 1px 0 #fff;
        filter: alpha(opacity=20);
        opacity: .2;
        margin-top: 0px;
        margin-right: 0px;
    }
    .custom-daterange-box{
        display: flex;
        width: 100%;
        height: 34px;
        padding: 6px 12px;
        font-size: 14px;
        line-height: 1.42857143;
        color: #555;
        background-color: #fff;
        background-image: none;
        border: 1px solid #ccc;
        border-radius: 4px;
        -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
        -webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
        -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
        transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    }
    .custom-daterange-box-icon{
        margin-left: 48px;
    }
    .scheduler-list-style{
        height: 180px;
        overflow: auto;
    }
    .ui-select-bootstrap > .ui-select-choices, .ui-select-bootstrap > .ui-select-no-choice {
        display: contents;
    }
</style>

<div class="content animate-panel" ng-repeat="widget in editWidgetData">
    <div class="hpanel">
        <div class="panel-heading">Select the Elements</div>
        <div class="panel-body">
            <div class="col-lg-4">
                <div class="col-md-12">
                    <label>Data Source</label>
                    <div class="input-group m-b">
                        <span class="input-group-addon">
                            <div ng-if="permission.createDataSource === true;"> 
                                <i title="Data Source" ng-click="removeBackDrop()" data-ui-sref="index.dataSource({locationId: locationID, startDate: widgetStartDate, endDate: widgetEndDate})" class="fa fa-link"></i>
                            </div>                            
                        </span>
                        <select class="form-control m-b" ng-model="widget.dataSourceId"
                                ng-change="selectDataSource(widget.dataSourceId, widget)"
                                ng-options="dataSource.name for dataSource in dataSources track by dataSource.id">
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="col-md-12">
                    <label>Data Set</label>
                    <div class="input-group m-b">
                        <span class="input-group-addon">                                
                            <div ng-if="permission.createDataSet === true;">
                                <i title="Data Set" ng-click="removeBackDrop()" data-ui-sref="index.dataSet({locationId: locationID, startDate: widgetStartDate, endDate: widgetEndDate})" class="fa fa-link"></i>
                            </div>
                        </span>
                        <select class="form-control" ng-model="widget.dataSetId" ng-options="dataSet.name for dataSet in dataSets track by dataSet.id" ng-change="changeUrl(widget.dataSetId, widget)">
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="col-md-12">
                    <div><label>Chart Type</label></div>
                    <a class="btn btn-app" ng-repeat="chartType in chartTypes track by chartType.id" ng-click="previewChart(chartType, widget)"> 
                        <span class="previewChart" title="{{chartType.name}}">
                            <i style="cursor: pointer" class="fa {{chartType.icon}}" ng-class="{'selected': chartType.type == (selectedRow?selectedRow:widget.chartType)}"></i> </span>
                    </a>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12" ng-if="editChartType == 'table'">
                    <div class="form-group col-lg-3">
                        <div class="col-md-12">
                            <label>Max Record</label>
                            <input type="text" ng-model="widget.maxRecord" class="form-control">
                        </div>
                    </div>     
                    <div class="col-lg-4">
                        <div class="col-md-12">
                            <div class="checkbox col-md-6" >
                                <input type="checkbox" ng-model="widget.tableFooter" ng-checked="widget.tableFooter == 1" />
                                <label> Table Footer </label>
                            </div>

                            <div class="checkbox col-md-6" >
                                <input type="checkbox" ng-model="widget.zeroSuppression" ng-checked="widget.zeroSuppression == 1">
                                <label>Zero Suppression</label>
                            </div>
                        </div>
                    </div> 
                </div>
            </div>
        </div>
    </div>
    <div class="row" ng-if="!(editChartType == 'table' || editChartType == 'text' || editChartType == '')">
        <div class="col-lg-12 table-deeta" >
            <div class="hpanel hgreen border-table"> 
                <div class="panel-heading">
                    <!--<div class="panel-tools">-->

                    <div ng-hide='editPreviewTitle'> 
                        <a class="title-ew" ng-click='editPreviewTitle = true;'>{{widget.widgetTitle?widget.widgetTitle:"Widget Title"}}</a>
                    </div> 
                    <div class="col-sm-10" ng-show='editPreviewTitle'>                           
                        <input  class='form-control' type='text' ng-model='widget.widgetTitle'>
                    </div>
                    <div class='col-sm-2 pull-right' ng-show='editPreviewTitle'>
                        <a ng-click='editPreviewTitle = false'><i class='fa fa-save'></i></a>
                        <a ng-click='editPreviewTitle = false'><i class='fa fa-close'></i></a>
                    </div>
                    <!--</div>-->
                </div>
                <div class="panel-body">                    
                    <div class="col-md-8">
                        <div ng-if="editChartType === 'ticker'">
                            <div ticker-Directive ticker-Source="{{previewChartUrl}}" ticker-Id="{{widget.id}}" ticker-Columns="{{previewColumn.columns}}"></div>
                        </div>
                        <div ng-if="editChartType === 'line'">
                            <div>
                                <div line-Chart-Source='{{previewChartUrl}}' widget-Columns="{{previewColumn.columns}}" line-Chart-Directive preview-Widget="{{previewColumn}}"></div>
                            </div>
                        </div>
                        <div ng-if="editChartType === 'area'">
                            <div>
                                <div area-Chart-Source='{{previewChartUrl}}' widget-Columns="{{previewColumn.columns}}" area-Chart-Directive preview-Widget="{{previewColumn}}"></div>
                            </div>
                        </div>
                        <div ng-if="editChartType === 'bar'">
                            <div>
                                <div bar-Chart-Directive bar-Chart-Source='{{previewChartUrl}}' widget-Columns="{{previewColumn.columns}}" preview-Widget="{{previewColumn}}"></div>
                            </div>
                        </div>
                        <div ng-if="editChartType === 'pie'">
                            <div>
                                <div pie-Chart-Source='{{previewChartUrl}}' widget-Columns="{{previewColumn.columns}}" pie-Chart-Directive preview-Widget="{{previewColumn}}"></div>
                            </div>                            
                        </div> 
                    </div>
                    <div class="col-md-4" ng-if="editChartType != 'ticker'">
                        <div class="form-group">
                            <div class="col-md-12" ng-if="editChartType != 'pie'">
                                <label>Select X-Axis</label>
                                <select style="height:28px; font-size: 11px;  padding: 0px 12px;" 
                                        class="form-control" ng-model="xColumn" 
                                        ng-options="currentColumn.displayName for currentColumn in collectionFields track by currentColumn.fieldName" 
                                        ng-change="selectX1Axis(widget, xColumn)">
                                </select>
                            </div>
                            <div class="col-md-12" ng-show="editChartType == 'pie'">
                                <label>Select Axis</label>
                                <select style="height:28px; font-size: 11px;  padding: 0px 12px;" 
                                        class="form-control" ng-model="selectPieChartAxis" 
                                        ng-options="currentColumn.displayName for currentColumn in collectionFields track by currentColumn.fieldName" 
                                        ng-change="selectPieAxis(widget, selectPieChartAxis)">
                                </select>
                            </div>
                        </div>

                        <div class="form-group" ng-if="editChartType != 'pie'">
                            <div class="col-md-12">
                                <label>Select Y1-Axis</label>
                                <ui-select multiple ng-model="y1Column" theme="bootstrap"  on-select="selectY1Axis(widget, y1Column, y1Column)" on-remove="removed(widget,$item, y1Column)">
                                    <ui-select-match placeholder=" y1 Axis...">{{$item.displayName}}</ui-select-match>
                                    <ui-select-choices repeat="y1axis in collectionFields  | filter:$select.search">
                                        {{y1axis.displayName}}
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>
                        
                        <div class="form-group" ng-if="editChartType != 'pie'">
                            <div class="col-md-12">
                                <label>Select Y2-Axis</label>
                                <ui-select multiple ng-model="y2Column" theme="bootstrap" on-select="selectY2Axis(widget, y2Column, y2Column)" on-remove="removed(widget,$item, y2Column)">
                                    <ui-select-match placeholder=" y2 Axis...">{{$item.displayName}}</ui-select-match>
                                    <ui-select-choices repeat="y2axis in collectionFields  | filter:$select.search">
                                        {{y2axis.displayName}}
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-12">
                                 <label>Format</label>
                                <ul class="list-unstyled">
                                    <li>
                                        <div class="col-sm-6">{{currentXColumn.displayName}}</div>
                                        <div class="col-sm-6">
                                            <select style="height:28px; font-size: 11px;  padding: 0px 12px;" ng-model='xAxisDisplayFormat' 
                                                    class='form-control'
                                                    ng-change="xaxisFormat(widget, xAxisDisplayFormat)"
                                                    ng-options="format.name for format in formats track by format.value">
                                            </select>
                                        </div>
                                    </li>
                                </ul>
                                 <ul class="list-unstyled">
                                     <li ng-repeat = "y1Item in y1Column">
                                         <div class="col-sm-6">{{y1Item.displayName}}</div>
                                         <div class="col-sm-6">
                                              <select style="height:28px; font-size: 11px;  padding: 0px 12px;" ng-model='displayFormat' 
                                                    class='form-control'
                                                    ng-change="xaxisFormat(widget, displayFormat)"
                                                    ng-options="format.name for format in formats track by format.value">
                                            </select>
                                         </div>
                                     </li>
                                 </ul>
                                 <ul class="list-unstyled">
                                     <li ng-repeat = "y2list in y2Column">
                                         <div class="col-sm-6">{{y2list.displayName}}</div>
                                         <div class="col-sm-6">
                                              <select style="height:28px; font-size: 11px;  padding: 0px 12px;" ng-model='displayFormat' 
                                                    class='form-control'
                                                    ng-change="xaxisFormat(widget, displayFormat)"
                                                    ng-options="format.name for format in formats track by format.value">
                                            </select>
                                         </div>
                                     </li>
                                 </ul>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-4" ng-show="editChartType == 'ticker'">
                        <div class="form-group">
                            <div class="col-md-12">
                                <label>Ticker Items</label>
                                <ui-select multiple ng-model="tickerItem" limit='3' theme="bootstrap" on-select="ticker(widget, tickerItem)" on-remove="removedColumns(widget,$item,tickerItem)">
                                    <ui-select-match placeholder=" Ticker Value...">{{$item.displayName}}</ui-select-match>
                                    <ui-select-choices repeat="currentColumn in collectionFields  | filter:$select.search">
                                        {{currentColumn.displayName}}
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-12">
                                <label>Format</label>
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Format</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="tickerItem in widget.columns">
                                            <td>{{tickerItem.displayName}}</td>
                                            <td>
                                                <select style="height:28px; font-size: 11px;  padding: 0px 12px;" ng-model='tickerItem.displayFormat' 
                                                        class='form-control'
                                                        ng-change="tickerFormat(widget, tickerItem)"
                                                        ng-options="format for format in formats">
                                                </select>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div> 
                <div class='panel-footer'>
                    <div>
                        <button class='btn btn-default' ng-click='closeWidget()'><span class='fa fa-times'></span> Cancel</button>
                        <button class='btn btn-info' ng-click='save(widget)'><span class='fa fa-save'></span> Save</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="row" ng-if="editChartType === 'table'">
        <div class="col-lg-12">
            <div class="hpanel border-table preview-table">
                <div widget-Preview-Table 
                     preview-Table-List='{{collectionFields}}'
                     preview-Urls='{{previewChartUrl}}' 
                     preview-Columns='{{widget.columns}}' 
                     preview-Widget="{{previewColumn}}" 
                     preview-Widget-Table="{{widget}}">                                     
                </div>
            </div>
        </div>
    </div>
    <div class="row" ng-if="editChartType === 'text'">
        <div class="col-sm-12">
            <div class="hpanel hgreen border-table">
                <div class="panel-heading">
                    <div ng-hide='editPreviewTitle'> 
                        <span><a ng-click='editPreviewTitle = true'>{{widget.widgetTitle}}</a></span>
                    </div> 
                    <div ng-show='editPreviewTitle'>
                        <div class='col-sm-8'>
                            <input  class='form-control' type='text' ng-model='widget.widgetTitle'>
                        </div> 
                        <div class='col-sm-4'>
                            <a ng-click='editPreviewTitle = false'><i class='fa fa-save'></i></a>
                            <a ng-click='editPreviewTitle = false'><i class='fa fa-close'></i></a>
                        </div>
                    </div>
                </div>
                <div class="panel-body" style="overflow: auto;height:350px;">
                    <div>
                        <textarea ck-Editor ng-model="widget.content" rows="10" cols="99"></textarea>
                    </div>  
                </div>  
                <div class='panel-footer'>
                    <div>
                        <button class='btn btn-default' ng-click='closeWidget()'><span class='fa fa-times'></span> Cancel</button>
                        <button class='btn btn-info' ng-click='save(widget)'><span class='fa fa-save'></span> Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



